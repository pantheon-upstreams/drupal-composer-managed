name: surf
recipe: pantheon
config:
  framework: drupal8
  site: surf-main
  id: cb68cc29-02f1-42bc-8e9a-1b212c282647
  xdebug: develop,debug
  composer_version: '2'
  webroot: web
  php: 8.1
services:
  database:
    portforward: 60657
  mailhog:
    type: mailhog
    hogfrom:
      - appserver
  appserver:
    config:
      php: .lando/php.ini
    overrides:
      environment:
        DRUSH_OPTIONS_URI: "https://surf.lndo.site"
        PHP_IDE_CONFIG: "serverName=appserver"
        XDEBUG_SESSION_START: PHPSTORM
tooling:
  drush:
    service: appserver
    cmd: drush --root=/app/web
  xdebug-on:
    service: appserver
    description: Enable xdebug
    cmd: docker-php-ext-enable xdebug && pkill -o -USR2 php-fpm
    user: root
  xdebug-off:
    service: appserver
    description: Disable xdebug
    cmd: rm /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini && pkill -o -USR2 php-fpm
    user: root
  push: disabled
  pull:
    options:
      code:
        default: none
