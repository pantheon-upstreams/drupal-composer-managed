{"version":3,"file":"./navigation/main-menu/main-menu.js","mappings":"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","sources":["webpack://prototype/./libraries/navigation/main-menu/main-menu.js"],"sourcesContent":["/**\n * Blocks - Search API\n * Functionality to simply hide and show the search form.\n *\n * - 01 - Hide / Show\n * - 02 - Drupal Attach\n */\n\n\n/*------------------------------------*\\\n  01 - Hide / Show\n  Simply changing a set of classes, attributes and states upon either a click,\n  or keyboard action.\n\\*------------------------------------*/\n\nconst menuSystem = (wrapper) => {\n  // Constructor\n  const openClass = 'is-open';\n  let links;\n\n  const closeDropdown = (element) => {\n    element.parentElement.classList.remove(openClass);\n    element.setAttribute('aria-expanded', 'false');\n  };\n\n  const openDropdown = (element) => {\n    element.parentElement.classList.add(openClass);\n    element.setAttribute('aria-expanded', 'true');\n  }\n\n  const closeAllDropdowns = () => {\n    links.forEach((link) => {\n      closeDropdown(link);\n    });\n  }\n\n  const onClickDropdownLink = (event) => {\n    if (event.currentTarget.parentElement.classList.contains(openClass)) {\n      closeDropdown(event.currentTarget);\n    } else {\n      // To prevent multiple dropdown sub-menus from being open, first collapse all.\n      closeAllDropdowns();\n      openDropdown(event.currentTarget);\n    }\n  };\n\n  const onKeydownDropdownLink = (event) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n\n      if (event.currentTarget.parentElement.classList.contains(openClass)) {\n        closeDropdown(event.currentTarget);\n      } else {\n        // To prevent multiple dropdown sub-menus from being open, first collapse all.\n        closeAllDropdowns();\n        openDropdown(event.currentTarget);\n      }\n    }\n  };\n\n  const onKeydownLink = (event) => {\n    // Close dropdown sub-menu and refocus on parent button, if available.\n    if (event.key === 'Escape' || event.key === 'End') {\n      if (event.currentTarget.closest(`.${openClass}`)) {\n        const opened = event.currentTarget.closest(`.${openClass}`);\n        const openedTrigger = opened.firstElementChild;\n\n        opened.classList.remove(openClass);\n        openedTrigger.setAttribute('aria-expanded', 'false');\n\n        setTimeout(focus => {\n          openedTrigger.focus();\n        }, 1);\n      }\n    }\n\n    // Collapse all menus if tabbing on the last link of the menu.\n    if (!event.shiftKey && event.key === 'Tab') {\n      if (event.currentTarget === links[links.length - 1]) {\n        closeAllDropdowns();\n      }\n    }\n  };\n\n  /**\n   * Window Click\n   * Any events associated with clicking anywhere within the browser window.\n   * @param event: [object] details regarding the specific event taken.\n   * @see init\n   */\n  const onWindowClick = (event) => {\n    // Close all dropdown sub-menus if clicking outside the menu system.\n    if (!wrapper.contains(event.target)) {\n      closeAllDropdowns();\n    }\n  };\n\n  /**\n   * Initialization\n   * Add any and all functionality as a singular program, dynamically setting\n   * element variables, states and event listeners.\n   * @param wrapper: [HTMLObject] Element that contains all elements contained\n   * inside the eventual modal.\n   */\n  const init = (wrapper) => {\n    links = wrapper.querySelectorAll('.menu__link');\n\n    links.forEach((link) => {\n      if (link.getAttribute('aria-haspopup')) {\n        link.addEventListener('click', onClickDropdownLink);\n        link.addEventListener('keydown', onKeydownDropdownLink);\n      } else {\n        link.addEventListener('keydown', onKeydownLink);\n      }\n    });\n\n    window.addEventListener('click', onWindowClick);\n  };\n\n  // Final Return\n  init (wrapper);\n};\n\n\n\n\n/*------------------------------------*\\\n  02 - Drupal Attach\n  Attach any previously defined functionality into Drupal behaviors.\n  https://www.drupal.org/docs/drupal-apis/javascript-api/javascript-api-overview\n\\*------------------------------------*/\n\nDrupal.behaviors.surfMainMenu = {\n  attach(context) {\n    const mainMenu = once('surf-main-menu', context.querySelector('.menu.menu__name--main'));\n\n    if (mainMenu.length !== 0) {\n      menuSystem(mainMenu[0]);\n    }\n  },\n}\n"],"names":["menuSystem","wrapper","openClass","links","closeDropdown","element","parentElement","classList","remove","setAttribute","openDropdown","add","closeAllDropdowns","forEach","link","onClickDropdownLink","event","currentTarget","contains","onKeydownDropdownLink","key","preventDefault","onKeydownLink","closest","opened","openedTrigger","firstElementChild","setTimeout","focus","shiftKey","length","onWindowClick","target","init","querySelectorAll","getAttribute","addEventListener","window","Drupal","behaviors","surfMainMenu","attach","context","mainMenu","once","querySelector"],"sourceRoot":""}