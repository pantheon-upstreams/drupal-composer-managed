Drupal.behaviors.surfMainMenu={attach(e){e=once("surf-main-menu",e.querySelector(".menu.menu__name--main"));if(0!==e.length){var t=e[0];const a="is-open";let r;const n=e=>{e.parentElement.classList.remove(a),e.setAttribute("aria-expanded","false")},s=e=>{e.parentElement.classList.add(a),e.setAttribute("aria-expanded","true")},i=()=>{r.forEach(e=>{n(e)})},c=e=>{(e.currentTarget.parentElement.classList.contains(a)?n:(i(),s))(e.currentTarget)},l=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),(e.currentTarget.parentElement.classList.contains(a)?n:(i(),s))(e.currentTarget))},u=e=>{if(("Escape"===e.key||"End"===e.key)&&e.currentTarget.closest("."+a)){var t=e.currentTarget.closest("."+a);const n=t.firstElementChild;t.classList.remove(a),n.setAttribute("aria-expanded","false"),setTimeout(e=>{n.focus()},1)}e.shiftKey||"Tab"!==e.key||e.currentTarget===r[r.length-1]&&i()},o=e=>{t.contains(e.target)||i()};(r=t.querySelectorAll(".menu__link")).forEach(e=>{e.getAttribute("aria-haspopup")?(e.addEventListener("click",c),e.addEventListener("keydown",l)):e.addEventListener("keydown",u)}),window.addEventListener("click",o)}}};