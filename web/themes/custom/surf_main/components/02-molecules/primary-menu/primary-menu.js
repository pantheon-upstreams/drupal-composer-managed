Drupal.behaviors.surfMainMenu={attach(e){e=once("surf-main-menu",e.querySelector(".menu.menu__name--main"));if(0!==e.length){var n=e[0];const r=window.matchMedia("(min-width: 1400px)"),s="is-open";let a,t;const i=e=>{e.parentElement.classList.remove(s),e.setAttribute("aria-expanded","false")},c=e=>{e.parentElement.classList.add(s),e.setAttribute("aria-expanded","true")},d=()=>{a.forEach(e=>{i(e)})},o=e=>{(e.currentTarget.parentElement.classList.contains(s)?i:("desktop"===t&&d(),c))(e.currentTarget)},l=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),(e.currentTarget.parentElement.classList.contains(s)?i:("desktop"===t&&d(),c))(e.currentTarget))},u=e=>{if(("Escape"===e.key||"End"===e.key)&&e.currentTarget.closest("."+s)){var t=e.currentTarget.closest("."+s);const n=t.firstElementChild;t.classList.remove(s),n.setAttribute("aria-expanded","false"),setTimeout(e=>{n.focus()},1)}e.shiftKey||"Tab"!==e.key||e.currentTarget===a[a.length-1]&&d()},m=e=>{"desktop"!==t||n.contains(e.target)||d()},p=()=>{t=r.matches?"desktop":"mobile"};(a=n.querySelectorAll(".menu__link")).forEach(e=>{e.getAttribute("aria-haspopup")?(e.addEventListener("click",o),e.addEventListener("keydown",l)):e.addEventListener("keydown",u)}),window.addEventListener("click",m),r.addEventListener("change",p),p()}}};