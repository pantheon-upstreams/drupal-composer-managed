{"version":3,"file":"./components/02-molecules/primary-menu/primary-menu.js","mappings":"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","sources":["webpack://prototype/./components/02-molecules/primary-menu/src/primary-menu.js"],"sourcesContent":["/**\n * Blocks - Search API\n * Functionality to simply hide and show the search form.\n *\n * - 01 - Hide / Show\n * - 02 - Drupal Attach\n */\n\n\n/*------------------------------------*\\\n  01 - Hide / Show\n  Simply changing a set of classes, attributes and states upon either a click,\n  or keyboard action.\n\\*------------------------------------*/\n\nconst menuSystem = (wrapper) => {\n  // Constructor\n  const mediaQuery = window.matchMedia('(min-width: 1400px)');\n  const openClass = 'is-open';\n  let links;\n  let state;\n\n  const closeDropdown = (element) => {\n    element.parentElement.classList.remove(openClass);\n    element.setAttribute('aria-expanded', 'false');\n  };\n\n  const openDropdown = (element) => {\n    element.parentElement.classList.add(openClass);\n    element.setAttribute('aria-expanded', 'true');\n  }\n\n  const closeAllDropdowns = () => {\n    links.forEach((link) => {\n      closeDropdown(link);\n    });\n  }\n\n  const onClickDropdownLink = (event) => {\n    if (event.currentTarget.parentElement.classList.contains(openClass)) {\n      closeDropdown(event.currentTarget);\n    } else {\n      if (state === 'desktop') {\n        // To prevent multiple dropdown sub-menus from being open, first collapse all.\n        closeAllDropdowns();\n      }\n\n      openDropdown(event.currentTarget);\n    }\n  };\n\n  const onKeydownDropdownLink = (event) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n\n      if (event.currentTarget.parentElement.classList.contains(openClass)) {\n        closeDropdown(event.currentTarget);\n      } else {\n        if (state === 'desktop') {\n          // To prevent multiple dropdown sub-menus from being open, first collapse all.\n          closeAllDropdowns();\n        }\n\n        openDropdown(event.currentTarget);\n      }\n    }\n  };\n\n  const onKeydownLink = (event) => {\n    // Close dropdown sub-menu and refocus on parent button, if available.\n    if (event.key === 'Escape' || event.key === 'End') {\n      if (event.currentTarget.closest(`.${openClass}`)) {\n        const opened = event.currentTarget.closest(`.${openClass}`);\n        const openedTrigger = opened.firstElementChild;\n\n        opened.classList.remove(openClass);\n        openedTrigger.setAttribute('aria-expanded', 'false');\n\n        setTimeout(focus => {\n          openedTrigger.focus();\n        }, 1);\n      }\n    }\n\n    // Collapse all menus if tabbing on the last link of the menu.\n    if (!event.shiftKey && event.key === 'Tab') {\n      if (event.currentTarget === links[links.length - 1]) {\n        closeAllDropdowns();\n      }\n    }\n  };\n\n  /**\n   * Window Click\n   * Any events associated with clicking anywhere within the browser window.\n   * @param event - [object] details regarding the specific event taken.\n   * @see init\n   */\n  const onWindowClick = (event) => {\n    if (state === 'desktop') {\n      // Close all dropdown sub-menus if clicking outside the menu system.\n      if (!wrapper.contains(event.target)) {\n        closeAllDropdowns();\n      }\n    }\n  };\n\n  /**\n   * Media Query Change\n   * Any events needing to be taken when a specific breakpoint has been activated.\n   * @see init\n   */\n  const onMediaQueryChange = () => {\n    if (mediaQuery.matches) {\n      state = 'desktop';\n    } else {\n      state = 'mobile';\n    }\n  };\n\n  /**\n   * Initialization\n   * Add any and all functionality as a singular program, dynamically setting\n   * element variables, states and event listeners.\n   * @param wrapper: [HTMLObject] Element that contains all elements contained\n   * inside the eventual modal.\n   */\n  const init = (wrapper) => {\n    links = wrapper.querySelectorAll('.menu__link');\n\n    links.forEach((link) => {\n      if (link.getAttribute('aria-haspopup')) {\n        link.addEventListener('click', onClickDropdownLink);\n        link.addEventListener('keydown', onKeydownDropdownLink);\n      } else {\n        link.addEventListener('keydown', onKeydownLink);\n      }\n    });\n\n    window.addEventListener('click', onWindowClick);\n\n    // Device or viewport change listener and on load.\n    mediaQuery.addEventListener('change', onMediaQueryChange);\n    onMediaQueryChange();\n  };\n\n  // Final Return\n  init (wrapper);\n};\n\n\n\n\n/*------------------------------------*\\\n  02 - Drupal Attach\n  Attach any previously defined functionality into Drupal behaviors.\n  https://www.drupal.org/docs/drupal-apis/javascript-api/javascript-api-overview\n\\*------------------------------------*/\n\nDrupal.behaviors.surfMainMenu = {\n  attach(context) {\n    const mainMenu = once('surf-main-menu', context.querySelector('.menu.menu__name--main'));\n\n    if (mainMenu.length !== 0) {\n      menuSystem(mainMenu[0]);\n    }\n  },\n}\n"],"names":["menuSystem","wrapper","mediaQuery","window","matchMedia","openClass","links","state","closeDropdown","element","parentElement","classList","remove","setAttribute","openDropdown","add","closeAllDropdowns","forEach","link","onClickDropdownLink","event","currentTarget","contains","onKeydownDropdownLink","key","preventDefault","onKeydownLink","closest","opened","openedTrigger","firstElementChild","setTimeout","focus","shiftKey","length","onWindowClick","target","onMediaQueryChange","matches","init","querySelectorAll","getAttribute","addEventListener","Drupal","behaviors","surfMainMenu","attach","context","mainMenu","once","querySelector"],"sourceRoot":""}