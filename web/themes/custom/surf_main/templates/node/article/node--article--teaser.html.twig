{# <pre>{{dump(content)}}</pre> #}

{#
  TODO: replace/update the hardcoded `category_url`
#}

{# -- TITLE --- #}
{% set title = label|field_value %}


{# -- IMAGE --- #}
{% set image = '/themes/custom/surf_main/templates/components/teaser/news-placeholder.png' %}
{% set alt = title %}

{% if content.field_media_primary['#items'].entity.field_media_image is not empty %}
  {% set image = file_url(content.field_media_primary['#items'].entity.field_media_image.entity.fileuri|image_style('teaser')) %}
  {% set alt = content.field_media_primary['#items'].entity.field_media_image.alt %}
{% endif %}

{# --- VIDEO --- #}
{% if content.field_media_primary['#items'].entity.field_media_oembed_video is not empty %}
  {# set category to video #}
  {% set category = 'Video' %}
  {# set icon #}
  {% set icon = 'video' %}
  {# set image #}
  {% set image = content.field_media_primary['#items'].entity.thumbnail.entity.uri.value|image_style('teaser') %}
{% else %}
  {% set category = 'Article' %}
{% endif %}

{# --- DATE --- #}
{% set teaser_date = content.field_date_published.0["#text"] %}

{# set the teaser date with fallback #}
{% set teaser_date = content.field_date_published.0["#text"] ? content.field_date_published.0["#text"] : node.created.value|date('F d, Y') %}

{# Teaser Text #}
{% if content.field_highlight is not empty %}
  {% set body = content.field_highlight[0]["#context"].value %}
{% else %}
  {% set body = null %}
{% endif %}

 {% include "teaser" with {
  layout: 'column-stack',
  title,
  body: null,
  url,
  category,
  category_url: '/news',
  teaser_date,
  image,
  alt,
  icon,
  } %}
