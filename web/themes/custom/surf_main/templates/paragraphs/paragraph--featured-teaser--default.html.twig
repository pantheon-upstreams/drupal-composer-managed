{# <pre>{{dump(content.field_teaser.0["#node"])}}</pre> #}

{# NODE URL #}
{% set url = drupal_url('node/' ~ content.field_teaser.0["#node"].nid.value) %}

{# -- TYPE --- #}
{% set type = content.field_teaser.0["#node"].type.0.target_id %}

{# -- CATEGORY URL --- #}
{% if type == 'event' %}
  {% set category_url = '/events' %}
{% elseif category_url == 'article' %}
  {% set category_url = '/news' %}
{% elseif category_url == 'press_release' %}
  {% set category_url = '/press-releases' %}
{% endif %}

{# -- TITLE --- #}
{% set title = content.field_teaser.0["#node"].title.value %}

{# -- IMAGE --- #}
{% set image = '/themes/custom/surf_main/templates/components/teaser/news-placeholder.png' %}
{% set alt = title %}

{% if content.field_teaser.0["#node"].field_media_primary.entity.field_media_image.entity.fileuri is not empty %}
  {% set image = file_url(content.field_teaser.0["#node"].field_media_primary.entity.field_media_image.entity.fileuri|image_style('teaser')) %}
  {% set alt = content.field_teaser.0["#node"].field_media_primary.entity.field_media_image.alt %}
{% endif %}

{# --- BODY --- #}
{% set body = content.field_teaser.0["#node"].field_overview.0.value %}

{# --- DATE --- #}
{% if type == 'event' %}

  {# Dates no set #}
  {% if content.field_teaser.0["#node"].field_dates.0.start_date is empty and content.field_teaser.0["#node"].field_dates.0.end_date is empty %}
    {% set dates = null %}
  {# Same Day #}
  {% elseif content.field_teaser.0["#node"].field_dates.0.start_date["#text"]|date('F j, Y') == content.field_teaser.0["#node"].field_dates.0.end_date["#text"]|date('F j, Y') %}
    {% set dates = content.field_teaser.0["#node"].field_dates.0.start_date["#text"]|date('F j, Y') %}
  {# Multiple Days #}
  {% else %}
    {% set dates = content.field_teaser.0["#node"].field_dates.0.start_date["#text"]|date('F j') ~ '-' ~ content.field_teaser.0["#node"].field_dates.0.end_date["#text"]|date|date('F d, Y') %}
  {% endif %}

  {# Dates no set #}
  {% if content.field_teaser.0["#node"].field_dates.0.start_date is empty and content.field_dates.0.end_date is empty %}
    {% set times = null %}
  {# All Day #}
  {% elseif (content.field_teaser.0["#node"].field_dates.0.start_date["#text"])|date('g:i A') == '12:00 AM' and (content.field_teaser.0["#node"].field_dates.0.end_date["#text"])|date('g:i A') == '11:59 PM'  %}
    {% set times = null %}
  {# Times to be set #}
  {% else %}
    {% set times = content.field_teaser.0["#node"].field_dates.0.start_date["#text"]|date('g:i A') ~ '-' ~ content.field_teaser.0["#node"].field_dates.0.end_date["#text"]|date('g:i A') %}
  {% endif %}

  {% if dates and times %}
    {% set teaser_date = dates ~ ' ' ~ times %}
  {% endif %}

{% else %}
  {% set teaser_date = content.field_teaser.0["#node"].field_date_published.value|date('F d, Y') %}
{% endif %}

<article{{ attributes.addClass(['l-constrained--xlarge', 'l--bottom-spacing'])}}>

{% include "teaser" with {
  layout: 'super',
  title,
  body,
  url,
  category: 'Featured',
  category_url,
  teaser_date,
  image,
  alt,
} %}

</article>
